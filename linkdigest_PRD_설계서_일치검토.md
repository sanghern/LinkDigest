# LinkDigest PRD vs 설계서 일치 검토

**검토일**: 2026-02-14  
**대상**: linkdigest_PRD.md ↔ linkdigest_설계서.md 내용 일치 여부

---

## 1. 종합 결과

| 구분 | 결과 | 비고 |
|------|------|------|
| **일치** | 대부분 일치 | 핵심 요구사항·기술 스택·API·보안·배포·테스트 등 동일 |
| **보조 일치** | 일부 | PRD에만 상세 수치(예: 요약 5줄) 있음. 설계서는 미명시이나 충돌 없음 |
| **불일치** | 없음 | 상반된 기술·동작 정의 없음 |

**결론**: 두 문서는 **일치**하며, 설계서는 PRD 요구사항을 반영하고 있다. 아래는 항목별 대조 요약이다.

---

## 2. 항목별 일치 현황

### 2.1 프로젝트 개요·제약사항

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 프로젝트 목적·범위 | §1.1, §1.2 | §1.1, §1.2 | ✓ |
| 제약사항 (기술 스택 고정, 외부 의존성, 운영) | §12 CON-001~004 | §1.3 제약사항 | ✓ |

### 2.2 기술 스택

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| Backend | FastAPI 0.109.2, Uvicorn 0.27.1, Python 3.11, SQLAlchemy, bcrypt, Pydantic 등 | §3.1 테이블 | ✓ |
| Frontend | React 18.2.0, Node 16+, Tailwind, Axios 등 | §3.2 테이블 | ✓ |
| AI/외부 | Ollama gpt-oss:120b-cloud, translategemma:4b | §3.3 | ✓ |

### 2.3 API

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 베이스 경로 | IR-003: 현재 /api, 향후 /api/v1 | §6 도입부 | ✓ |
| 엔드포인트 | IR-005: /auth, /bookmarks, /logs | §6.1 | ✓ |
| 에러 응답 | IR-004: 400, 401, 403, 409, 500 | §6.3 표 | ✓ |
| 조회수 증가 | FR-013/014: 상세 조회 시 증가, 중복 방지(세션/사용자) | §6.4 (GET 시 증가, 중복 방지) | ✓ |
| 북마크 목록 | page, per_page, tags, AND/OR, 부분 일치 | §6.2 | ✓ |

### 2.4 데이터베이스·데이터

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 테이블 | users, bookmarks, logs, sessions (DR-001~004) | §5.1 ERD, §5.2 | ✓ |
| CASCADE·검증 | DR-005, DR-006: 참조 무결성, CASCADE, Pydantic | §5.2 데이터 무결성 및 보관 정책 | ✓ |
| 로그·세션 보관 | DR-007: 로그 30일, 만료 세션 정리 | §5.2, §9.2 | ✓ |

### 2.5 보안

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 인증 | JWT 30분, bcrypt, OAuth2 Password (SEC-001, SEC-002) | §7.1 | ✓ |
| 민감 정보 | SEC-007, NFR-007: 비밀번호·토큰 로그 미기록 | §7.2 민감 정보 로그 미기록 | ✓ |
| HTTPS | SEC-008: 프로덕션 HTTPS 필수 | §7.3 | ✓ |
| 기타 | SQL Injection/XSS/CSRF, CORS | §7.1, §7.2 | ✓ |

### 2.6 성능

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 응답 시간 | NFR-001, PERF-001: API 1초(95%), 검색 1초, 로딩 3초 | §8.1 | ✓ |
| 처리량 | NFR-002: 동시 100명, 50 TPS | §8.1 | ✓ |
| 요약 | NFR-003: 30초 이내, 워커 3개 | §8.1, §8.2, §11.2 | ✓ |

### 2.7 UI·사용성

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 반응형 | IR-002, NFR-011: 320/768/1024px | §4.2 UI 요구사항 | ✓ |
| 검색 UI | FR-015, 019~021: 파란색 배경, X 버튼, 전체 제거, "북마크 목록(N개)" | §11.3 UI 요구사항 | ✓ |
| 로딩·에러·접근성 | NFR-011, NFR-012, UX-002 등 | §4.2 | ✓ |

### 2.8 배포·운영

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| Backend Docker | DEPLOY-004: 독립, .env, profile | §10.2.1 | ✓ |
| Frontend Docker | DEPLOY-005: 독립, 3000, REACT_APP_API_URL=/api | §10.2.2 | ✓ |
| 배포 자동화·롤백 | DEPLOY-003 | §10.5 | ✓ |
| 백업·무중단 | OPS-003, OPS-004 | §10.5 | ✓ |
| 모니터링 | OPS-001, OPS-002 | §9.1~9.3 | ✓ |
| 하드웨어·브라우저 | SR-001, IR-001 | §10.1 | ✓ |

### 2.9 테스트

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| Backend 70%, Frontend 60% | TEST-001, TEST-002 | §10.6 표 | ✓ |
| API 통합·시스템 테스트 | TEST-003, TEST-004 | §10.6 | ✓ |

### 2.10 기능 상세 (스크래핑·요약·검색)

| 항목 | PRD | 설계서 | 일치 |
|------|-----|--------|------|
| 제목 추출 우선순위 | FR-006: og:title → article h1 → h1 → title | §11.1 | ✓ |
| 콘텐츠 추출 | 메인 영역, script/style/nav 제거, 링크·이미지 | §11.1 | ✓ |
| 번역 | FR-007: translategemma:4b, 한글(영문) | §3.3, §11.2 참조 | ✓ |
| 요약 | FR-008: 마크다운, "요약 생성 중...", 3 워커, 30초 | §11.2 | ✓ |
| 검색 | AND/OR, 구분자, LIKE 부분 일치 | §11.3 | ✓ |

---

## 3. PRD에만 있는 상세 (설계서에 없어도 충돌 없음)

- **FR-008 "핵심 요약 5줄 생성"**: PRD에만 명시. 설계서 §11.2는 “마크다운 형식으로 요약 생성”만 적고 5줄은 없음. **충돌 없음.** (필요 시 설계서에 “요약 5줄 목표” 추가 가능)
- **FR-007 "한글(영문) 형태로 저장"**: PRD에만 명시. 설계서는 번역 모델·역할만 기술. **충돌 없음.**

---

## 4. 설계서에만 있는 구현 디테일 (PRD와 상충 없음)

- API 엔드포인트 목록에 **POST /{id}/increase-read-count** 존재. PRD는 “상세 조회 시 조회수 증가”만 요구하므로, GET 처리 시 내부적으로 증가하거나 이 POST를 호출하는 구현 모두 PRD와 **일치**.
- Nginx 설정 예시, .env 예시, 디렉터리 구조 등은 설계서만의 구현 가이드로, PRD와 **충돌 없음**.

---

## 5. 결론 및 권장

- **일치**: PRD와 설계서는 요구사항·기술 스택·API·에러 코드·DB·보안·성능·UI·배포·테스트·제약사항에서 **일치**하며, 상반된 내용은 없음.
- **선택 보강**: 완전 대칭을 원하면 설계서 §11.2에 “요약은 핵심 5줄 생성 목표” 한 줄 추가 가능. 없어도 요구사항 충돌은 없음.

**최종**: 두 문서는 **일치**하는 상태로, PRD 요구사항이 설계서에 반영되어 있다.
