# URL 중복 기능 추가 시 변경 범위 및 로그인 이슈 분석

## 1. URL 중복 기능에서 실제로 변경한 코드

### 1.1 백엔드 (의도된 기능 변경)

| 파일 | 변경 내용 | 기존 동작 훼손 여부 |
|------|-----------|----------------------|
| `backend/app/crud/crud_bookmark.py` | **추가**: `get_by_url(db, url)` (URL만으로 조회). 기존 `get_by_owner_and_url` **그대로 유지** | 없음. 기존 메서드 삭제/시그니처 변경 없음 |
| `backend/app/api/endpoints/bookmarks.py` | 북마크 **생성** 엔드포인트 한 곳: 중복 검사 호출을 `get_by_owner_and_url(...)` → `get_by_url(db, url=url_str)` 로 변경 | 없음. “다른 사용자 URL도 중복”이라는 **요구사항에 따른 동작 변경**일 뿐 |

- **인증/로그인 관련 코드**: 전혀 건드리지 않음 (auth, session, login API 등 무변경).
- **다른 API/CRUD**: 북마크 생성 외에는 수정 없음.

**결론**: URL 중복 기능은 **백엔드 2개 파일, “추가 1개 + 호출부 1곳 변경”**만 있으며, 기존 소스를 삭제하거나 다른 기능을 깨뜨리지는 않았습니다.

---

## 2. 로그인 페이지가 보이지 않는 현상과의 인과관계

### 2.1 원인 가능성 정리

- **URL 중복 변경이 원인인가?**  
  **아니오.**  
  - 로그인 페이지는 **프론트엔드 라우팅 + 로그인 UI**에서 나옵니다.
  - 수정한 부분은 **북마크 생성 시 URL 중복 검사**뿐이며, 인증/로그인 API·세션·프론트 라우팅을 건드리지 않았습니다.
  - 따라서 “URL 중복 기능 추가”만으로는 로그인 페이지가 사라질 수 없습니다.

- **가능한 실제 원인** (당시 스크린샷 기준):
  - **SSL/연결 경고(“주의 요함”)**: 인증서·혼합 콘텐츠 등으로 스크립트가 막혀 React가 로드되지 않아 흰 화면.
  - **배포/캐시**: 이전 빌드가 캐시되거나, 잘못된 빌드가 배포되어 로그인 라우트/번들이 안 나옴.
  - **SPA fallback 미설정**: `/login` 등 직접 접근 시 `index.html`이 아닌 404가 나가 빈 화면.

### 2.2 이후에 한 프론트엔드 수정과의 관계

- “로그인 페이지가 보이지 않는다”는 말에 대응해 **별도로** 다음을 수정했습니다.
  - `frontend/src/components/Navigation.js`: 로그인 전에도 최소 헤더(로고 + 로그인 링크) 표시.
  - `frontend/src/App.js`: 알 수 없는 경로(`*`) → `/login` 리다이렉트 추가.
- 이 수정들은 **URL 중복 기능과 무관**하며, “로그인 화면이 안 보이는 문제”에 대한 **대응/개선**입니다.  
  즉, **URL 중복 기능 추가가 로그인을 깨뜨린 것이 아니라**, 로그인 이슈는 다른 원인으로 보고, 그에 대한 별도 수정을 한 것입니다.

---

## 3. 재발 방지를 위한 권장 사항

1. **기능 단위로 커밋/배포**  
   - URL 중복은 백엔드만 배포, 로그인/프론트 이슈는 원인 파악 후 별도 배포하면 “어떤 변경이 무슨 현상을 일으켰는지” 구분하기 쉽습니다.

2. **변경 범위 명시**  
   - “이번 작업은 북마크 생성 API의 중복 검사 로직만 변경했으며, 인증·로그인·프론트 라우팅은 미수정”처럼 변경 범위를 짧게 정리해 두면, 나중에 로그인 이슈가 나와도 원인 후보를 좁히기 좋습니다.

3. **회귀 테스트**  
   - 로그인 플로우, 북마크 생성(중복 시 409) 등은 자동/수동 테스트로 한 번씩 돌려 두면, 다른 기능 추가 시 기존 동작이 깨졌는지 빨리 알 수 있습니다.

---

## 4. 요약

- **URL 중복 기능**: 기존 동작하는 소스를 “제거”하거나 “다른 기능”을 깨뜨리지 않았고, CRUD는 추가만 하고 생성 API 한 곳만 호출을 바꾼 **최소 변경**입니다.
- **로그인 페이지 미노출**: URL 중복 변경과는 **인과관계가 없음**. SSL/배포/SPA 설정 등 **환경·배포 측** 원인 가능성이 큽니다.
- 이런 혼선을 줄이려면, **기능별 변경 범위 정리 + 로그인 이슈는 별도 원인 분석**으로 나누어 보는 것이 좋습니다.
