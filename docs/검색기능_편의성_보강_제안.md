# 검색 기능 편의성 보강 제안

현재 검색은 **태그 클릭으로만** 필터링됩니다. 편의성 측면에서 추가 구현으로 보강할 수 있는 방안을 제안합니다.

---

## 현재 동작 요약

- **방식**: 목록 카드에 있는 태그를 클릭하면 해당 태그(및 추가 선택 태그)로 필터링 (AND 조건).
- **한계**: 태그를 모르면 찾기 어렵고, 제목·URL·요약 내용으로는 검색할 수 없음.

---

## 제안 1: 자유 검색창 추가 (우선 추천)

**내용**  
목록 상단에 **검색 입력창**을 두고, 사용자가 입력한 문구로 **제목·요약·URL**을 검색.

**편의성**
- 태그를 기억하지 않아도 제목이나 내용 일부만 입력해 찾을 수 있음.
- 한 곳에서 키워드를 입력하는 것이 태그 클릭보다 빠른 경우가 많음.

**구현 방향**
- **프론트**: 제목 옆 또는 필터 영역에 `<input type="text" placeholder="제목·요약·URL 검색..." />` 추가. 입력 시 `query`(또는 `q`) 파라미터로 API 호출. **디바운스(300~500ms)** 적용해 타이핑마다 요청이 나가지 않게 처리.
- **백엔드**: `GET /bookmarks?tags=...&q=검색어` 추가. `q`가 있으면 제목(title), 요약(summary), URL(url)에 대해 **ILIKE %검색어%** (또는 PostgreSQL full-text) 조건 추가. 기존 태그 필터와 함께 동작(태그 AND + q 조건).

**난이도**: 중. 백엔드 CRUD에 검색 조건 추가 + 프론트 상태/API 연동.

---

## 제안 2: URL에 검색/필터 상태 반영

**내용**  
선택한 태그나 검색어를 **쿼리 스트링**에 넣기 (예: `/bookmarks?tags=AI&tags=Python&q=docker`).

**편의성**
- 새로고침해도 같은 검색/필터가 유지됨.
- URL 공유 시 "이 필터로 본 목록"을 그대로 전달 가능.

**구현 방향**
- **프론트**: `useSearchParams`(React Router) 또는 `window.location.search`로 초기값 읽기. `selectedTags`, 검색어 변경 시 `setSearchParams`로 URL 갱신. 페이지 진입 시 URL에서 `tags`, `q`를 읽어 API 파라미터로 사용.

**난이도**: 하. 기존 상태를 URL과 동기화하는 로직 추가.

---

## 제안 3: 태그 자동완성/제안

**내용**  
검색창 또는 "태그로 필터" 입력 시 **이미 저장된 태그 목록**을 API로 받아와, 드롭다운으로 제안.

**편의성**
- 오타 감소, 태그 이름을 정확히 기억하지 않아도 선택 가능.
- "자주 쓰는 태그"를 한눈에 보고 고를 수 있음.

**구현 방향**
- **백엔드**: `GET /bookmarks/tags` 또는 기존 목록 API 응답에 `all_tags: string[]` 등으로 사용자 북마크에 등장하는 태그 목록 반환 (중복 제거).
- **프론트**: 검색창 포커스 또는 태그 입력 시 위 목록을 기반으로 필터/자동완성 UI 표시.

**난이도**: 하~중. 태그 목록 API 추가 + 프론트 드롭다운/자동완성 컴포넌트.

---

## 제안 4: 검색창 초기화 버튼

**내용**  
검색어가 있을 때 입력창 오른쪽에 **X** 또는 "지우기" 버튼을 두어, 한 번에 검색을 해제.

**편의성**
- 빠르게 "전체 목록"으로 돌아갈 수 있음 (로그 뷰어의 검색 초기화와 동일한 UX).

**구현 방향**
- **프론트**: `query` 상태가 비어 있지 않을 때만 X 버튼 표시, 클릭 시 `query` 초기화 및 목록 재조회.

**난이도**: 하.

---

## 제안 5: 키보드 포커스 단축키

**내용**  
예: **`/`** 키를 누르면 검색 입력창에 포커스.

**편의성**
- 마우스 없이 바로 검색 시작 가능 (개발자/파워유저 친화).

**구현 방향**
- **프론트**: `useEffect`에서 `keydown` 리스너 등록. `event.key === '/'` 이고 입력 가능한 요소에 포커스가 없을 때만 검색창으로 포커스 이동. `preventDefault()`로 `/`가 입력창에 찍히지 않게 처리.

**난이도**: 하.

---

## 제안 6: 검색 범위 선택 (제목만 / 요약 포함 / 전체)

**내용**  
검색 시 "제목만", "제목+요약", "제목+요약+URL" 등 **범위**를 라디오/드롭다운으로 선택.

**편의성**
- 넓은 범위 검색은 느리거나 결과가 많을 수 있으므로, 필요에 따라 범위를 좁혀 사용 가능.

**구현 방향**
- **백엔드**: `q`와 함께 `scope=title | summary | all` 같은 파라미터 추가. `scope`에 따라 WHERE 조건에 포함할 컬럼만 지정.
- **프론트**: 검색창 근처에 범위 선택 UI 추가, 선택값을 API 파라미터로 전달.

**난이도**: 중. 제안 1 구현 후 추가하면 자연스러움.

---

## 제안 7: 최근 검색어 (선택)

**내용**  
검색한 키워드를 **localStorage** 등에 최근 N개 저장하고, 검색창 포커스 시 드롭다운으로 표시. 클릭 시 해당 검색어로 다시 검색.

**편의성**
- 자주 쓰는 검색을 다시 타이핑하지 않아도 됨.

**구현 방향**
- **프론트**: 검색 실행 시 배열에 추가하고 localStorage에 저장. 포커스 시 목록 표시. 개인정보/보안 이슈가 있으면 "최근 검색어 저장" 옵션으로 끌 수 있게 처리 가능.

**난이도**: 하.

---

## 우선순위 제안

| 순서 | 제안 | 기대 효과 | 난이도 |
|------|------|-----------|--------|
| 1 | 자유 검색창 + 백엔드 q 검색 (제안 1) | 태그 없이도 제목/요약/URL로 검색 | 중 |
| 2 | URL에 검색/필터 반영 (제안 2) | 새로고침·공유 시 상태 유지 | 하 |
| 3 | 검색창 초기화 버튼 (제안 4) | 빠른 필터 해제 | 하 |
| 4 | `/` 키보드 포커스 (제안 5) | 키보드만으로 검색 시작 | 하 |
| 5 | 태그 자동완성 (제안 3) | 태그 선택 편의 | 하~중 |
| 6 | 검색 범위 선택 (제안 6) | 고급 사용자 옵션 | 중 |
| 7 | 최근 검색어 (제안 7) | 재검색 편의 | 하 |

---

## 정리

- **가장 효과가 큰 것**: **자유 검색창(제목·요약·URL 검색)** 과 **URL에 필터/검색어 반영**.
- **빠르게 적용 가능한 것**: 검색 초기화 버튼, `/` 단축키, (선택) 최근 검색어, 태그 제안.

원하시는 제안부터 단계적으로 구현하시면 됩니다. 특정 제안에 대한 API 스펙이나 컴포넌트 구조가 필요하면 해당 항목만 골라 상세 설계도 정리해 드리겠습니다.
